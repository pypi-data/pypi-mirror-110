(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[30],{1168:function(e,t,n){"use strict";n.r(t),n.d(t,"ModelComparePage",(function(){return J}));var a=n(156),c=n(0),r=n(58),o=n(517),s=n(518),u=n(519),l=n.n(u),i=n(527),d=n(508),m=n.n(d),g=n(507),f=l.a.mark(v),p=l.a.mark(h),b=l.a.mark(S);function v(e){var t,n,a,c;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,m.a.get("".concat(g.b,"/").concat(e.payload));case 3:return t=r.sent,n=t.data,r.next=7,m.a.get("".concat(g.d,"/").concat(n.run_id));case 7:return a=r.sent,c=a.data,r.next=11,Object(i.a)(y.getBaseModelStateSuccess({base:n,base_run:c}));case 11:r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(0),r.next=17,Object(i.a)(y.getBaseModelStateFailure(r.t0.toLocaleString()));case 17:case"end":return r.stop()}}),f,null,[[0,13]])}function h(e){var t;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.a.get("".concat(g.b,"/").concat(e.payload));case 3:return t=n.sent,n.next=6,Object(i.a)(y.getModelsStateSuccess({ml_models:t.data}));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(i.a)(y.getModelsStateFailure(n.t0.toLocaleString()));case 12:case"end":return n.stop()}}),p,null,[[0,8]])}function S(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.b)(y.getBaseModelState.type,v);case 2:return e.next=4,Object(i.b)(y.getModelsState.type,h);case 4:case"end":return e.stop()}}),b)}var O={},j=Object(o.a)({name:"modelComparePage",initialState:O,reducers:{getModelsState:function(e,t){e.isLoading=!0},getModelsStateSuccess:function(e,t){e.ml_models=t.payload.ml_models,e.isLoading=!1},getModelsStateFailure:function(e,t){e.error=t.payload,e.isLoading=!1},getBaseModelState:function(e,t){e.isLoading=!0},getBaseModelStateSuccess:function(e,t){e.base=t.payload.base,e.base_run=t.payload.base_run,e.isLoading=!1},getBaseModelStateFailure:function(e,t){e.error=t.payload,e.isLoading=!1}}}),y=j.actions,E=n(38),M=Object(E.a)([function(e){return e.modelComparePage||O}],(function(e){return e})),w=n(18),x=n(606),L=n(1160),C=n(1138),k=n(1176),B=n(502),_=n(691),F=n(510),P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},U=n(482),A=function(e,t){return c.createElement(U.a,Object.assign({},e,{ref:t,icon:P}))};A.displayName="ArrowRightOutlined";var N=c.forwardRef(A),V=n(524),H=n(95);function J(){var e,t,n=x.a.Option,o=L.a.Title,u=Object(w.h)(),l=u.mlModelName,i=u.baseModelVersion,d=u.baseModelStage,f=Object(r.c)(),p=(Object(s.a)({key:j.name,reducer:j.reducer}),Object(s.b)({key:j.name,saga:S}),{actions:j.actions}).actions,b=Object(r.d)(M);c.useEffect((function(){f(p.getModelsState("".concat(l))),f(p.getBaseModelState("".concat(l,"/").concat(i)))}),[f,l,i,p]);var v=Object(w.f)();function h(e,t){v.push("/models/".concat(l,"/compare/").concat(e,"...").concat(t))}return c.createElement(c.Fragment,null,c.createElement(H.a,null,c.createElement("title",null,"HuoguoML | Compare models"),c.createElement("meta",{name:"description",content:"Compare models"})),c.createElement(F.a,{contentUri:["models",l,"compare","".concat(i,"...").concat(d)],skipUri:["compare"]},c.createElement(o,{level:1},"Change stage"),c.createElement(c.Fragment,null,c.createElement(o,{level:2},"Select stage"),d!==Object(V.d)(null===(e=b.base)||void 0===e?void 0:e.tag)&&c.createElement(k.a,{style:{marginBottom:12},showIcon:!0,message:"Change stage of model ".concat(l," ").concat(i," to ").concat(d),type:"info",action:c.createElement(c.Fragment,null,c.createElement(B.a,{type:"primary",onClick:function(){return e=Object(V.c)(d),void m.a.put("".concat(g.b,"/").concat(l,"/").concat(i),Object(a.a)(Object(a.a)({},b.base),{},{tag:e})).then((function(e){C.b.success("Updated model state"),v.push("/models/".concat(l))})).catch((function(e){C.b.error(e.message)}));var e}},"Change stage"))}),c.createElement(_.b,null,c.createElement(x.a,{defaultValue:i,style:{width:120},onSelect:function(e){return h(e,d)}},null===(t=b.ml_models)||void 0===t?void 0:t.map((function(e){return c.createElement(n,{value:e.version},e.version)}))),c.createElement(N,null),c.createElement(x.a,{defaultValue:d,style:{width:120},onSelect:function(e){return h(i,e)}},c.createElement(n,{value:"none"},"None"),c.createElement(n,{value:"staging"},"Staging"),c.createElement(n,{value:"production"},"Production"))))))}},510:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(153),c=Object(a.a)((function(){return Promise.all([n.e(4),n.e(41)]).then(n.bind(null,533))}),(function(e){return e.ContentCardsLayout}))},524:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return o}));var a=function(e){return e?e.charAt(0).toUpperCase()+e.toLowerCase().slice(1):""},c=function(e,t){var n=e.flatMap((function(e){return Object.keys(e[t])}));return Array.from(new Set(n))},r=function(e){return 0===e?"staging":1===e?"production":-1===e?"none":""},o=function(e){return"staging"===e?0:"production"===e?1:-1}}}]);