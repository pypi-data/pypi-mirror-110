(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[28],{1172:function(e,t,a){"use strict";a.r(t),a.d(t,"ModelComparePage",(function(){return J}));var n=a(156),c=a(0),r=a(58),o=a(517),s=a(518),u=a(519),l=a.n(u),i=a(527),d=a(508),m=a.n(d),g=a(507),f=l.a.mark(v),p=l.a.mark(h),b=l.a.mark(S);function v(e){var t,a,n,c;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,m.a.get("".concat(g.b,"/").concat(e.payload));case 3:return t=r.sent,a=t.data,r.next=7,m.a.get("".concat(g.d,"/").concat(a.run_id));case 7:return n=r.sent,c=n.data,r.next=11,Object(i.a)(y.getBaseModelStateSuccess({base:a,base_run:c}));case 11:r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(0),r.next=17,Object(i.a)(y.getBaseModelStateFailure(r.t0.toLocaleString()));case 17:case"end":return r.stop()}}),f,null,[[0,13]])}function h(e){var t;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m.a.get("".concat(g.b,"/").concat(e.payload));case 3:return t=a.sent,a.next=6,Object(i.a)(y.getModelsStateSuccess({ml_models:t.data}));case 6:a.next=12;break;case 8:return a.prev=8,a.t0=a.catch(0),a.next=12,Object(i.a)(y.getModelsStateFailure(a.t0.toLocaleString()));case 12:case"end":return a.stop()}}),p,null,[[0,8]])}function S(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.b)(y.getBaseModelState.type,v);case 2:return e.next=4,Object(i.b)(y.getModelsState.type,h);case 4:case"end":return e.stop()}}),b)}var O={},j=Object(o.a)({name:"modelComparePage",initialState:O,reducers:{getModelsState:function(e,t){e.isLoading=!0},getModelsStateSuccess:function(e,t){e.ml_models=t.payload.ml_models,e.isLoading=!1},getModelsStateFailure:function(e,t){e.error=t.payload,e.isLoading=!1},getBaseModelState:function(e,t){e.isLoading=!0},getBaseModelStateSuccess:function(e,t){e.base=t.payload.base,e.base_run=t.payload.base_run,e.isLoading=!1},getBaseModelStateFailure:function(e,t){e.error=t.payload,e.isLoading=!1}}}),y=j.actions,M=a(38),E=Object(M.a)([function(e){return e.modelComparePage||O}],(function(e){return e})),w=a(18),x=a(607),L=a(1165),k=a(1140),C=a(1179),B=a(500),_=a(688),F=a(510),P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},U=a(483),A=function(e,t){return c.createElement(U.a,Object.assign({},e,{ref:t,icon:P}))};A.displayName="ArrowRightOutlined";var N=c.forwardRef(A),V=a(522);function J(){var e,t,a=x.a.Option,o=L.a.Title,u=Object(w.h)(),l=u.mlModelName,i=u.baseModelVersion,d=u.baseModelStage,f=Object(r.c)(),p=(Object(s.a)({key:j.name,reducer:j.reducer}),Object(s.b)({key:j.name,saga:S}),{actions:j.actions}).actions,b=Object(r.d)(E);c.useEffect((function(){f(p.getModelsState("".concat(l))),f(p.getBaseModelState("".concat(l,"/").concat(i)))}),[f,l,i,p]);var v=Object(w.f)();function h(e,t){v.push("/models/".concat(l,"/compare/").concat(e,"...").concat(t))}return c.createElement(c.Fragment,null,c.createElement(F.a,{contentUri:["models",l,"compare","".concat(i,"...").concat(d)],skipUri:["compare"]},c.createElement(o,{level:1},"Change stage"),c.createElement(c.Fragment,null,c.createElement(o,{level:2},"Select stage"),d!==Object(V.d)(null===(e=b.base)||void 0===e?void 0:e.tag)&&c.createElement(C.a,{style:{marginBottom:12},showIcon:!0,message:"Change stage of model ".concat(l," ").concat(i," to ").concat(d),type:"info",action:c.createElement(c.Fragment,null,c.createElement(B.a,{type:"primary",onClick:function(){return e=Object(V.c)(d),void m.a.put("".concat(g.b,"/").concat(l,"/").concat(i),Object(n.a)(Object(n.a)({},b.base),{},{tag:e})).then((function(e){k.b.success("Updated model state"),v.push("/models/".concat(l))})).catch((function(e){k.b.error(e.message)}));var e}},"Change stage"))}),c.createElement(_.b,null,c.createElement(x.a,{defaultValue:i,style:{width:120},onSelect:function(e){return h(e,d)}},null===(t=b.ml_models)||void 0===t?void 0:t.map((function(e){return c.createElement(a,{value:e.version},e.version)}))),c.createElement(N,null),c.createElement(x.a,{defaultValue:d,style:{width:120},onSelect:function(e){return h(i,e)}},c.createElement(a,{value:"none"},"None"),c.createElement(a,{value:"staging"},"Staging"),c.createElement(a,{value:"production"},"Production"))))))}},510:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(153),c=Object(n.a)((function(){return Promise.all([a.e(16),a.e(40)]).then(a.bind(null,533))}),(function(e){return e.ContentCardsLayout}))},522:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return r})),a.d(t,"c",(function(){return o}));var n=function(e){return e?e.charAt(0).toUpperCase()+e.toLowerCase().slice(1):""},c=function(e,t){var a=e.flatMap((function(e){return Object.keys(e[t])}));return Array.from(new Set(a))},r=function(e){return 0===e?"staging":1===e?"production":-1===e?"none":""},o=function(e){return"staging"===e?0:"production"===e?1:-1}}}]);