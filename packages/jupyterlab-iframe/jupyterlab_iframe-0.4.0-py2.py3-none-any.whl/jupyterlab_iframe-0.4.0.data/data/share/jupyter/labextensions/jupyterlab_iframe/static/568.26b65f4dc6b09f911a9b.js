(self.webpackChunkjupyterlab_iframe=self.webpackChunkjupyterlab_iframe||[]).push([[568],{568:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._activate=void 0;const o=n(441),a=n(275),i=n(510),r=n(760);n(549);let s=0;const l={activate:f,autoStart:!0,id:"jupyterlab_iframe",requires:[o.ICommandPalette]};class c extends i.Widget{constructor(e){super(),this.id=`${e}-${s}`;const t=`favicon-${s}`;this.title.iconClass=t,this.title.label=e,this.title.closable=!0,this.local_file=e.startsWith("local://"),s+=1,this.local_file||e.startsWith("http")||(e="https://"+e);const n=document.createElement("div");n.classList.add("iframe-widget");const o=document.createElement("iframe");this.local_file?(console.log("fetching local file "+e),e=`iframes/local?path=${encodeURI(e.replace("local://",""))}`,o.src=a.PageConfig.getBaseUrl()+e):r.request("get",e).then((n=>{if(n.ok&&!n.headers.includes("Access-Control-Allow-Origin")){console.log("site accessible: proceeding"),o.src=e;const n=new URL("/favicon.ico",e).href;r.request("get",n).then((e=>{if(e.ok){const e=document.createElement("style");e.innerHTML=`div.${t} { background: url("${n}"); }`,document.head.appendChild(e)}}))}else if(console.log("site failed with code "+n.status.toString()),404===n.status);else if(401===n.status);else{const n=`${a.PageConfig.getBaseUrl()}iframes/proxy?path=${new URL("/favicon.ico",e).href}`;e=`iframes/proxy?path=${encodeURI(e)}`,o.src=a.PageConfig.getBaseUrl()+e,console.log(`setting proxy for ${e}`),r.request("get",n).then((e=>{if(e.ok){const e=document.createElement("style");e.innerHTML=`div.${t} { background: url("${n}"); }`,document.head.appendChild(e)}}))}})),n.appendChild(o),this.node.appendChild(n)}}class d extends i.Widget{constructor(){const e=document.createElement("div"),t=document.createElement("label");t.textContent="Site:";const n=document.createElement("input");n.value="",n.placeholder="http://path.to.site",e.appendChild(t),e.appendChild(n),super({node:e})}getValue(){return this.inputNode.value}get inputNode(){return this.node.getElementsByTagName("input")[0]}}function u(e,t,n){const o="iframe:open-"+n;e.commands.addCommand(o,{execute:()=>{const t=new c(n);e.shell.add(t),e.shell.activateById(t.id)},isEnabled:()=>!0,label:"Open "+n}),t.addItem({command:o,category:"Sites"})}function f(e,t){let n;const i="iframe:open";e.commands.addCommand(i,{execute:t=>{let a=void 0===t.path?"":t.path;""===a?o.showDialog({body:new d,buttons:[o.Dialog.cancelButton(),o.Dialog.okButton({label:"GO"})],focusNodeSelector:"input",title:"Open site"}).then((t=>{if("Cancel"!==t.button.label){if(!t.value)return null;a=t.value,n=new c(a),e.shell.add(n),e.shell.activateById(n.id)}})):(n=new c(a),e.shell.add(n),e.shell.activateById(n.id))},isEnabled:()=>!0,label:"Open IFrame"}),t.addItem({command:i,category:"Sites"}),r.request("get",a.PageConfig.getBaseUrl()+"iframes/").then((n=>{if(n.ok){const o=n.json(),a=o.welcome,i=o.local_files;let r=!1;const s=o.sites;for(const n of s)console.log("adding quicklink for "+n),n===a&&(r=!0),n&&u(e,t,n);for(const n of i){const o=`local://${n}`;console.log("adding quicklink for "+o),o===a&&(r=!0),o&&u(e,t,o)}r||""!==a&&u(e,t,a),a&&e.restored.then((()=>{localStorage.getItem("jupyterlab_iframe_welcome")||(localStorage.setItem("jupyterlab_iframe_welcome","false"),e.commands.execute("iframe:open-"+a))}))}})),console.log("JupyterLab extension jupyterlab_iframe is activated!")}t._activate=f,t.default=l},408:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(645),a=n.n(o)()((function(e){return e[1]}));a.push([e.id,"div.iframe-widget {\n    height:100%;\n    width:100%;\n}\n\ndiv.iframe-widget iframe{\n    height:100%;\n    width:100%;\n}\n\n/*\nfrom: https://github.com/ian-r-rose/jupyterlab/blob/d7ec6ec271fcbeed2a0f5b1ed652a4802a430496/packages/htmlviewer/style/index.css;\n\nWhen drag events occur, `p-mod-override-cursor` is added to the body.\nBecause iframes steal all cursor events, the following two rules are necessary\nto suppress pointer events while resize drags are occuring. There may be a\nbetter solution to this problem.\n*/\nbody.p-mod-override-cursor div.iframe-widget {\n  position: relative;\n  pointer-events: none;\n\n}\n\nbody.p-mod-override-cursor div.iframe-widget:before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: transparent;\n}",""]);const i=a},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(o)for(var i=0;i<this.length;i++){var r=this[i][0];null!=r&&(a[r]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);o&&a[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},549:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var o=n(379),a=n.n(o),i=n(408);a()(i.Z,{insert:"head",singleton:!1});const r=i.Z.locals||{}},379:(e,t,n)=>{"use strict";var o,a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function r(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},o=[],a=0;a<e.length;a++){var s=e[a],l=t.base?s[0]+t.base:s[0],c=n[l]||0,d="".concat(l," ").concat(c);n[l]=c+1;var u=r(d),f={css:s[1],media:s[2],sourceMap:s[3]};-1!==u?(i[u].references++,i[u].updater(f)):i.push({identifier:d,updater:m(f,t),references:1}),o.push(d)}return o}function l(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var i=n.nc;i&&(o.nonce=i)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var r=a(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,d=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function u(e,t,n,o){var a=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=d(t,a);else{var i=document.createTextNode(a),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(i,r[t]):e.appendChild(i)}}function f(e,t,n){var o=n.css,a=n.media,i=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var h=null,p=0;function m(e,t){var n,o,a;if(t.singleton){var i=p++;n=h||(h=l(t)),o=u.bind(null,n,i,!1),a=u.bind(null,n,i,!0)}else n=l(t),o=f.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var a=r(n[o]);i[a].references--}for(var l=s(e,t),c=0;c<n.length;c++){var d=r(n[c]);0===i[d].references&&(i[d].updater(),i.splice(d,1))}n=l}}}}}]);