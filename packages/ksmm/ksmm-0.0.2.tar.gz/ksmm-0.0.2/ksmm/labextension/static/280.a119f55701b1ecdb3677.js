(self.webpackChunk_jupyterlab_ipython_KernelSpec_Manager=self.webpackChunk_jupyterlab_ipython_KernelSpec_Manager||[]).push([[280],{1305:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>K});var n=a(50138),r=a(90357),l=(a(14039),a(56271)),s=a.n(l),i=a(10682),o=a(45114);const m=e=>s().createElement("div",null,s().createElement(o.Z,{variant:"success",onClose:()=>e.handleClose(),dismissible:!0},s().createElement(o.Z.Heading,null," The deployment of env_name was success. ")));var c=a(44439),u=a(56043),p=a.n(u),d=a(15881),y=a(31555),g=a(34051);const h={title:"iPyKernel Management Menu",type:"object",properties:{argv:{type:"array",items:{type:"string"},title:""},env:{type:"object",title:"object",properties:{EnvVar:{type:"string"}},additionalProperties:{type:"string"}},display_name:{type:"string",title:"Display Name"},language:{type:"string",title:"Programming Language"},interrupt_mode:{type:"string",title:"Interrupt Mode",enum:["signal","message"]},parameters:{type:"object",properties:{cores:{type:"string",enum:["4","6","8"],title:"CPU Cores"},memory:{type:"string",enum:["8GB","16GB","32GB"],title:"Memory"}}},metadata:{type:"object",title:""}},required:["argv","display_name","env","interrupt_mode","language","metadata"]},v={title:"iPyKernel Card",type:"array",items:{type:"object",properties:{kernel_name:{type:"string"},jupyter_name:{type:"string"}}}};var f=a(35159);const E=e=>{const{cardPayload:t,handleSubmit:a}=e,n={"ui:ArrayFieldTemplate":e=>s().createElement(g.Z,{className:"pl-2 pr-2"},t.map((e=>s().createElement(y.Z,{key:e.kernel_name},s().createElement(f.motion.div,{className:"pt-3 pb-3",whileHover:{scale:1.1}},s().createElement("a",{style:{cursor:"pointer"},onClick:()=>a(e.kernel_name)},s().createElement(d.Z,{style:{width:"18rem",height:"12rem"}},s().createElement(d.Z.Body,null,s().createElement(d.Z.Title,null,"Jupyter: ",e.jupyter_name),s().createElement(d.Z.Title,null,"Kernel: ",e.kernel_name)))))))))};return s().createElement("div",null,s().createElement(p(),{schema:v,uiSchema:n,children:" "}))};var S=a(72122),b=a(56841);const _=e=>{const[t,a]=(0,l.useState)(e.value.name),[n,r]=(0,l.useState)(e.formData[e.value.name]);return s().createElement("div",null,s().createElement("input",{type:"string",value:t,onChange:n=>{e.handleKey(t,n.target.value),a(n.target.value)}}),s().createElement("input",{type:"string",value:n,onChange:a=>{e.handleVal(t,a.target.value),r(a.target.value)}}))},k=e=>{const t=(t,a)=>{e.formData[a]=e.formData[t],delete e.formData[t],console.log(e.formData)},a=(t,a)=>{e.formData[t]=a,console.log(e.formData)},n=e.uiSchema["ui:widget"],r=e.formData;return s().createElement("div",null,e.properties.map((l=>n(e={value:l,formData:r,handleKey:t,handleVal:a}))),s().createElement("button",{type:"button",onClick:t=>{alert(e.onAddClick)}},"Add New"))},C=e=>{const t=function(e){const t=[],a=[],n=[],r=[],l=[];return e.forEach((s=>{"display_name"==s.name||"interrupt_mode"==s.name||"language"==s.name?t.push(e.indexOf(s)):"argv"==s.name?a.push(e.indexOf(s)):"env"==s.name?n.push(e.indexOf(s)):"parameters"==s.name?r.push(e.indexOf(s)):"metadata"==s.name?l.push(e.indexOf(s)):console.log("oopsies")})),{"General Settings":t,"Launch Arguments":a,"Environment Variables":n,"Compute Parameters":r,Metadata:l}}(e.properties);return s().createElement("div",null,t[e.selecteditem].map((t=>s().createElement("div",{className:"property-wrapper",key:t},e.properties[t].content))))},j=e=>{const t={"ui:ObjectFieldTemplate":e=>{const[t,a]=(0,l.useState)("General Settings");var n=["General Settings","Launch Arguments","Environment Variables","Compute Parameters","Metadata"];return s().createElement("div",null,s().createElement(S.Z,{defaultActiveKey:n[0],onSelect:e=>a(e)},n.map((a=>s().createElement(b.Z,{eventKey:a,key:a,title:a},s().createElement(C,{selecteditem:t,properties:e.properties,handleAdditionalProperties:e.onAddClick,mainprops:e}))))))},env:{"ui:widget":_,"ui:autofocus":!0,"ui:ObjectFieldTemplate":k,"ui:options":{expandable:!0}}};return s().createElement("div",null,s().createElement(p(),{schema:e.schema,uiSchema:t,formData:e.formData,onSubmit:e.onSubmit}))},w=()=>{const[e,t]=(0,l.useState)({}),[a,n]=(0,l.useState)(!1),[r,o]=(0,l.useState)(!1),[u,p]=(0,l.useState)({}),[d,y]=(0,l.useState)(""),[g,v]=(0,l.useState)(!0),[f,S]=(0,l.useState)([]),[b,_]=(0,l.useState)(!1),k=(t,a)=>{const r=JSON.parse(JSON.stringify(e));y(t),p(r[t]),o(!1),n(!0)},C=()=>{1==g&&0==a&&e&&f&&(v(!1),o(!0))},w=()=>{n(!1),_(!1),o(!0)};return(0,l.useEffect)((()=>{const a=async()=>{const a=await fetch("http://localhost:8888/ks"),n=await a.json();c.isEqual(e,n)||(t(n),S((e=>{var t=[];for(const n in e){var a={kernel_name:`${n}`,jupyter_name:`${e[n].display_name}`};t.push(a)}return[...Array(Math.ceil(t.length/4))].map(((e,a)=>t.slice(4*a,4*a+4)))})(n)))};a(),f.length>0&&C();const n=setInterval((()=>{a(),r&&C()}),5e3);return()=>{clearInterval(n)}}),[e,f]),s().createElement("div",{className:"full-w-div"},s().createElement(i.Z,{fluid:!0,className:"jp-ReactForm"},s().createElement("a",{onClick:()=>w()}," iPyKernel Manager "),r?f.map(((e,t)=>s().createElement(E,{handleSubmit:k,cardPayload:e,key:t}))):null,b?s().createElement(m,{handleClose:w}):null,a?s().createElement(j,{schema:h,formData:u,onSubmit:e=>{console.log("submitted data",JSON.stringify(e.formData)),fetch("http://localhost:8888/ks",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({editedKernelPayload:JSON.stringify(e.formData),originalKernelName:d})}).then((e=>{200==e.status&&_(!0)}))}}):null))};class D extends n.ReactWidget{constructor(){super(),this.addClass("jp-ReactWidget"),this.addClass("jp-ReactForm"),this.addClass("full-w-div")}render(){return s().createElement(w,null)}}var P;!function(e){e.create="create-conda-store-widget"}(P||(P={}));const K={id:"conda-store-widget",autoStart:!0,optional:[r.ILauncher],activate:(e,t)=>{const{commands:a}=e,r=P.create;a.addCommand(r,{caption:"A way to manage IPython Kernels",label:"ksmm",icon:e=>(e.isPalette,null),execute:()=>{const t=new D,a=new n.MainAreaWidget({content:t});a.title.label="ksmm",e.shell.add(a,"main")}}),t&&t.add({command:r})}}}}]);