var understory;(()=>{var __webpack_modules__={509:module=>{eval('// function bindWebActions() {\n//     $$("indie-action").each(function() {\n//         this.onclick = function(e) {\n//             var action_link = this.querySelector("a");\n//             // TODO action_link.attr("class", "fa fa-spinner fa-spin");\n//\n//             var action_do = this.getAttribute("do");\n//             var action_with = this.getAttribute("with");\n//\n//             // protocolCheck("web+action://" + action_do + "?url=" + action_with,\n//             // setTimeout(function() {\n//             //     var url = "//canopy.garden/?origin=" + window.location.href +\n//             //               "do=" + action_do + "&with=" + action_with;\n//             //     var html = `\x3c!--p>Your device does not support web\n//             //                 actions<br><em><strong>or</strong></em><br>\n//             //                 You have not yet paired your website with\n//             //                 your browser</p>\n//             //                 <hr--\x3e\n//             //                 <p>If you have a website that supports web\n//             //                 actions enter it here:</p>\n//             //                 <form id=action-handler action=/actions-finder>\n//             //                 <label>Your Website\n//             //                 <div class=bounding><input type=text\n//             //                 name=url></div></label>\n//             //                 <input type=hidden name=do value="${action_do}">\n//             //                 <input type=hidden name=with value="${action_with}">\n//             //                 <p><small>Target:\n//             //                 <code>${action_with}</code></small></p>\n//             //                 <button>${action_do}</button>\n//             //                 </form>\n//             //                 <p>If you do not you can create one <a\n//             //                 href="${url}">here</a>.</p>`;\n//             //     switch (action_do) {\n//             //         case "sign-in":\n//             //             html = html + `<p>If you are the owner of this site,\n//             //                            <a href=/security/identification>sign\n//             //                            in here</a>.</p>`;\n//             //     }\n//             //     html = html + `<p><small><a href=/help#web-actions>Learn\n//             //                    more about web actions</a></small></p>`;\n//             //     $("#webaction_help").innerHTML = html;\n//             //     $("#webaction_help").style.display = "block";\n//             //     $("#blackout").style.display = "block";\n//             //     $("#blackout").onclick = function() {\n//             //         $("#webaction_help").style.display = "none";\n//             //         $("#blackout").style.display = "none";\n//             //     };\n//             // }, 200);\n//\n//             window.location = action_link.getAttribute("href");\n//\n//             e.preventDefault ? e.preventDefault() : e.returnValue = false;\n//         }\n//     });\n// }\nvar MicropubClient = /** @class */ (function () {\n    function MicropubClient(endpoint, token) {\n        var _this = this;\n        this.endpoint = endpoint;\n        this.token = token;\n        this.headers = {\n            accept: \'application/json\'\n        };\n        if (typeof token !== \'undefined\') {\n            this.headers.authorization = "Bearer " + token;\n        }\n        fetch(this.endpoint + \'?q=config\', { headers: this.headers }).then(function (response) {\n            if (response.status === 200 || response.status === 201) {\n                return response.json().then(function (data) {\n                    _this.config = data;\n                });\n            }\n        });\n        this.create = this.create.bind(this);\n        this.read = this.read.bind(this);\n        this.update = this.update.bind(this);\n        this.delete = this.delete.bind(this);\n        this.query = this.query.bind(this);\n        this.upload = this.upload.bind(this);\n    }\n    MicropubClient.prototype.create = function (type, payload, visibility) {\n        var headers = this.headers;\n        headers[\'content-type\'] = \'application/json\';\n        if (typeof visibility !== \'undefined\') {\n            visibility = \'public\';\n        }\n        return fetch(this.endpoint, {\n            method: \'POST\',\n            headers: headers,\n            body: JSON.stringify({\n                type: ["h-" + type],\n                properties: payload,\n                visibility: visibility\n            })\n        }).then(function (response) {\n            if (response.status === 200 || response.status === 201) {\n                var permalink = response.headers.get(\'location\');\n                // if (permalink.startsWith(\'/\')) {\n                //   permalink = `https://${me}${permalink}`\n                // }\n                return permalink;\n            }\n        });\n    };\n    MicropubClient.prototype.read = function (url) {\n        var headers = this.headers;\n        headers[\'content-type\'] = \'application/json\';\n        return fetch(this.endpoint, {\n            method: \'GET\',\n            headers: headers\n        }).then(function (response) {\n            if (response.status === 200 || response.status === 201) {\n                return response.json().then(function (data) {\n                    return data;\n                });\n            }\n        });\n    };\n    MicropubClient.prototype.update = function (url, payload) {\n        payload.action = \'update\';\n        payload.url = url;\n        return fetch(this.endpoint, {\n            method: \'POST\',\n            headers: {\n                accept: \'application/json\',\n                authorization: "Bearer " + this.token,\n                \'content-type\': \'application/json\'\n            },\n            body: JSON.stringify(payload)\n        }).then(function (response) {\n            if (response.status === 200 || response.status === 201) {\n                console.log(\'UPDATED!\');\n            }\n        });\n    };\n    MicropubClient.prototype.delete = function (url) {\n    };\n    MicropubClient.prototype.query = function (q, args) {\n        return fetch(this.endpoint + ("?q=" + q + "&search=" + args), {\n            headers: this.headers\n        }).then(function (response) {\n            if (response.status === 200 || response.status === 201) {\n                return response.json().then(function (data) {\n                    return data;\n                });\n            }\n        });\n    };\n    MicropubClient.prototype.upload = function () {\n    };\n    return MicropubClient;\n}());\n// class MicrosubClient {\n//   constructor (endpoint, token) {\n//     this.endpoint = endpoint\n//     this.token = token\n//     this.followers = this.followers.bind(this)\n//     this.follow = this.follow.bind(this)\n//   }\n// \n//   followers (...channel) {\n//     let requestUrl = this.endpoint + \'action=follow\'\n//     if (channel.length) {\n//       requestUrl += `&channel=${channel[0]}`\n//     }\n//     return fetch(requestUrl).then(response => {\n//       if (response.status === 200 || response.status === 201) {\n//         return response.json().then(data => {\n//           return data\n//         })\n//       }\n//     })\n//   }\n// \n//   follow (url, ...channel) {\n//     let body = `action=follow&url=${url}`\n//     if (channel.length) {\n//       body += `&channel=${channel[0]}`\n//     }\n//     fetch(this.endpoint, {\n//       method: \'POST\',\n//       headers: { \'content-type\': \'application/x-www-form-urlencoded\' },\n//       body: body\n//     }).then(response => {\n//       if (response.status === 200 || response.status === 201) {\n//         return response.json().then(data => {\n//           return data\n//         })\n//       }\n//     })\n//   }\n// \n//   search (query, ...channel) {\n//     let body = `action=search&query=${query}`\n//     if (channel.length) {\n//       body += `&channel=${channel[0]}`\n//     }\n//     return fetch(this.endpoint, {\n//       method: \'POST\',\n//       headers: { \'content-type\': \'application/x-www-form-urlencoded\' },\n//       body: body\n//     }).then(response => {\n//       if (response.status === 200 || response.status === 201) {\n//         return response.json().then(data => {\n//           return data\n//         })\n//       }\n//     })\n//   }\n// }\nmodule.exports = {\n    MicropubClient: MicropubClient\n    // MicrosubClient: MicrosubClient\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91bmRlcnN0b3J5Ly4vdW5kZXJzdG9yeS50cz8wYjE0Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNFQUFzRSxVQUFVO0FBQ2hGLHdFQUF3RSxZQUFZO0FBQ3BGO0FBQ0EsMENBQTBDLFlBQVk7QUFDdEQsNENBQTRDLFVBQVU7QUFDdEQ7QUFDQTtBQUNBLDBDQUEwQyxJQUFJO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0Qyx3QkFBd0I7QUFDcEU7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxHQUFHLEVBQUUsVUFBVTtBQUMzRDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsV0FBVztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxJQUFJO0FBQzNDO0FBQ0EsNkJBQTZCLFdBQVc7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHNEQUFzRDtBQUN6RTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLE1BQU07QUFDL0M7QUFDQSw2QkFBNkIsV0FBVztBQUN4QztBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsc0RBQXNEO0FBQ3pFO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiNTA5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZnVuY3Rpb24gYmluZFdlYkFjdGlvbnMoKSB7XG4vLyAgICAgJCQoXCJpbmRpZS1hY3Rpb25cIikuZWFjaChmdW5jdGlvbigpIHtcbi8vICAgICAgICAgdGhpcy5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xuLy8gICAgICAgICAgICAgdmFyIGFjdGlvbl9saW5rID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiYVwiKTtcbi8vICAgICAgICAgICAgIC8vIFRPRE8gYWN0aW9uX2xpbmsuYXR0cihcImNsYXNzXCIsIFwiZmEgZmEtc3Bpbm5lciBmYS1zcGluXCIpO1xuLy9cbi8vICAgICAgICAgICAgIHZhciBhY3Rpb25fZG8gPSB0aGlzLmdldEF0dHJpYnV0ZShcImRvXCIpO1xuLy8gICAgICAgICAgICAgdmFyIGFjdGlvbl93aXRoID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJ3aXRoXCIpO1xuLy9cbi8vICAgICAgICAgICAgIC8vIHByb3RvY29sQ2hlY2soXCJ3ZWIrYWN0aW9uOi8vXCIgKyBhY3Rpb25fZG8gKyBcIj91cmw9XCIgKyBhY3Rpb25fd2l0aCxcbi8vICAgICAgICAgICAgIC8vIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4vLyAgICAgICAgICAgICAvLyAgICAgdmFyIHVybCA9IFwiLy9jYW5vcHkuZ2FyZGVuLz9vcmlnaW49XCIgKyB3aW5kb3cubG9jYXRpb24uaHJlZiArXG4vLyAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgIFwiZG89XCIgKyBhY3Rpb25fZG8gKyBcIiZ3aXRoPVwiICsgYWN0aW9uX3dpdGg7XG4vLyAgICAgICAgICAgICAvLyAgICAgdmFyIGh0bWwgPSBgPCEtLXA+WW91ciBkZXZpY2UgZG9lcyBub3Qgc3VwcG9ydCB3ZWJcbi8vICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBhY3Rpb25zPGJyPjxlbT48c3Ryb25nPm9yPC9zdHJvbmc+PC9lbT48YnI+XG4vLyAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgWW91IGhhdmUgbm90IHlldCBwYWlyZWQgeW91ciB3ZWJzaXRlIHdpdGhcbi8vICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICB5b3VyIGJyb3dzZXI8L3A+XG4vLyAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgPGhyLS0+XG4vLyAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgPHA+SWYgeW91IGhhdmUgYSB3ZWJzaXRlIHRoYXQgc3VwcG9ydHMgd2ViXG4vLyAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgYWN0aW9ucyBlbnRlciBpdCBoZXJlOjwvcD5cbi8vICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICA8Zm9ybSBpZD1hY3Rpb24taGFuZGxlciBhY3Rpb249L2FjdGlvbnMtZmluZGVyPlxuLy8gICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxsYWJlbD5Zb3VyIFdlYnNpdGVcbi8vICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPWJvdW5kaW5nPjxpbnB1dCB0eXBlPXRleHRcbi8vICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBuYW1lPXVybD48L2Rpdj48L2xhYmVsPlxuLy8gICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPWRvIHZhbHVlPVwiJHthY3Rpb25fZG99XCI+XG4vLyAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9d2l0aCB2YWx1ZT1cIiR7YWN0aW9uX3dpdGh9XCI+XG4vLyAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgPHA+PHNtYWxsPlRhcmdldDpcbi8vICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICA8Y29kZT4ke2FjdGlvbl93aXRofTwvY29kZT48L3NtYWxsPjwvcD5cbi8vICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICA8YnV0dG9uPiR7YWN0aW9uX2RvfTwvYnV0dG9uPlxuLy8gICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDwvZm9ybT5cbi8vICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICA8cD5JZiB5b3UgZG8gbm90IHlvdSBjYW4gY3JlYXRlIG9uZSA8YVxuLy8gICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIGhyZWY9XCIke3VybH1cIj5oZXJlPC9hPi48L3A+YDtcbi8vICAgICAgICAgICAgIC8vICAgICBzd2l0Y2ggKGFjdGlvbl9kbykge1xuLy8gICAgICAgICAgICAgLy8gICAgICAgICBjYXNlIFwic2lnbi1pblwiOlxuLy8gICAgICAgICAgICAgLy8gICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyBgPHA+SWYgeW91IGFyZSB0aGUgb3duZXIgb2YgdGhpcyBzaXRlLFxuLy8gICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0vc2VjdXJpdHkvaWRlbnRpZmljYXRpb24+c2lnblxuLy8gICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gaGVyZTwvYT4uPC9wPmA7XG4vLyAgICAgICAgICAgICAvLyAgICAgfVxuLy8gICAgICAgICAgICAgLy8gICAgIGh0bWwgPSBodG1sICsgYDxwPjxzbWFsbD48YSBocmVmPS9oZWxwI3dlYi1hY3Rpb25zPkxlYXJuXG4vLyAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgbW9yZSBhYm91dCB3ZWIgYWN0aW9uczwvYT48L3NtYWxsPjwvcD5gO1xuLy8gICAgICAgICAgICAgLy8gICAgICQoXCIjd2ViYWN0aW9uX2hlbHBcIikuaW5uZXJIVE1MID0gaHRtbDtcbi8vICAgICAgICAgICAgIC8vICAgICAkKFwiI3dlYmFjdGlvbl9oZWxwXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4vLyAgICAgICAgICAgICAvLyAgICAgJChcIiNibGFja291dFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuLy8gICAgICAgICAgICAgLy8gICAgICQoXCIjYmxhY2tvdXRcIikub25jbGljayA9IGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICAgICAgLy8gICAgICAgICAkKFwiI3dlYmFjdGlvbl9oZWxwXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbi8vICAgICAgICAgICAgIC8vICAgICAgICAgJChcIiNibGFja291dFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4vLyAgICAgICAgICAgICAvLyAgICAgfTtcbi8vICAgICAgICAgICAgIC8vIH0sIDIwMCk7XG4vL1xuLy8gICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gYWN0aW9uX2xpbmsuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKTtcbi8vXG4vLyAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0ID8gZS5wcmV2ZW50RGVmYXVsdCgpIDogZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuLy8gICAgICAgICB9XG4vLyAgICAgfSk7XG4vLyB9XG52YXIgTWljcm9wdWJDbGllbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWljcm9wdWJDbGllbnQoZW5kcG9pbnQsIHRva2VuKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZW5kcG9pbnQgPSBlbmRwb2ludDtcbiAgICAgICAgdGhpcy50b2tlbiA9IHRva2VuO1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSB7XG4gICAgICAgICAgICBhY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZW9mIHRva2VuICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJzLmF1dGhvcml6YXRpb24gPSBcIkJlYXJlciBcIiArIHRva2VuO1xuICAgICAgICB9XG4gICAgICAgIGZldGNoKHRoaXMuZW5kcG9pbnQgKyAnP3E9Y29uZmlnJywgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCB8fCByZXNwb25zZS5zdGF0dXMgPT09IDIwMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb25maWcgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jcmVhdGUgPSB0aGlzLmNyZWF0ZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlYWQgPSB0aGlzLnJlYWQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy51cGRhdGUgPSB0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRlbGV0ZSA9IHRoaXMuZGVsZXRlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucXVlcnkgPSB0aGlzLnF1ZXJ5LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudXBsb2FkID0gdGhpcy51cGxvYWQuYmluZCh0aGlzKTtcbiAgICB9XG4gICAgTWljcm9wdWJDbGllbnQucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uICh0eXBlLCBwYXlsb2FkLCB2aXNpYmlsaXR5KSB7XG4gICAgICAgIHZhciBoZWFkZXJzID0gdGhpcy5oZWFkZXJzO1xuICAgICAgICBoZWFkZXJzWydjb250ZW50LXR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgaWYgKHR5cGVvZiB2aXNpYmlsaXR5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdmlzaWJpbGl0eSA9ICdwdWJsaWMnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLmVuZHBvaW50LCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgdHlwZTogW1wiaC1cIiArIHR5cGVdLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHBheWxvYWQsXG4gICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogdmlzaWJpbGl0eVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCB8fCByZXNwb25zZS5zdGF0dXMgPT09IDIwMSkge1xuICAgICAgICAgICAgICAgIHZhciBwZXJtYWxpbmsgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnbG9jYXRpb24nKTtcbiAgICAgICAgICAgICAgICAvLyBpZiAocGVybWFsaW5rLnN0YXJ0c1dpdGgoJy8nKSkge1xuICAgICAgICAgICAgICAgIC8vICAgcGVybWFsaW5rID0gYGh0dHBzOi8vJHttZX0ke3Blcm1hbGlua31gXG4gICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgIHJldHVybiBwZXJtYWxpbms7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTWljcm9wdWJDbGllbnQucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIHZhciBoZWFkZXJzID0gdGhpcy5oZWFkZXJzO1xuICAgICAgICBoZWFkZXJzWydjb250ZW50LXR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuZW5kcG9pbnQsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDAgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSAyMDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTWljcm9wdWJDbGllbnQucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh1cmwsIHBheWxvYWQpIHtcbiAgICAgICAgcGF5bG9hZC5hY3Rpb24gPSAndXBkYXRlJztcbiAgICAgICAgcGF5bG9hZC51cmwgPSB1cmw7XG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLmVuZHBvaW50LCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBhY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiBcIkJlYXJlciBcIiArIHRoaXMudG9rZW4sXG4gICAgICAgICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDAgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSAyMDEpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVVBEQVRFRCEnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBNaWNyb3B1YkNsaWVudC5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKHVybCkge1xuICAgIH07XG4gICAgTWljcm9wdWJDbGllbnQucHJvdG90eXBlLnF1ZXJ5ID0gZnVuY3Rpb24gKHEsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuZW5kcG9pbnQgKyAoXCI/cT1cIiArIHEgKyBcIiZzZWFyY2g9XCIgKyBhcmdzKSwge1xuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDAgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSAyMDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTWljcm9wdWJDbGllbnQucHJvdG90eXBlLnVwbG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB9O1xuICAgIHJldHVybiBNaWNyb3B1YkNsaWVudDtcbn0oKSk7XG4vLyBjbGFzcyBNaWNyb3N1YkNsaWVudCB7XG4vLyAgIGNvbnN0cnVjdG9yIChlbmRwb2ludCwgdG9rZW4pIHtcbi8vICAgICB0aGlzLmVuZHBvaW50ID0gZW5kcG9pbnRcbi8vICAgICB0aGlzLnRva2VuID0gdG9rZW5cbi8vICAgICB0aGlzLmZvbGxvd2VycyA9IHRoaXMuZm9sbG93ZXJzLmJpbmQodGhpcylcbi8vICAgICB0aGlzLmZvbGxvdyA9IHRoaXMuZm9sbG93LmJpbmQodGhpcylcbi8vICAgfVxuLy8gXG4vLyAgIGZvbGxvd2VycyAoLi4uY2hhbm5lbCkge1xuLy8gICAgIGxldCByZXF1ZXN0VXJsID0gdGhpcy5lbmRwb2ludCArICdhY3Rpb249Zm9sbG93J1xuLy8gICAgIGlmIChjaGFubmVsLmxlbmd0aCkge1xuLy8gICAgICAgcmVxdWVzdFVybCArPSBgJmNoYW5uZWw9JHtjaGFubmVsWzBdfWBcbi8vICAgICB9XG4vLyAgICAgcmV0dXJuIGZldGNoKHJlcXVlc3RVcmwpLnRoZW4ocmVzcG9uc2UgPT4ge1xuLy8gICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAxKSB7XG4vLyAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCkudGhlbihkYXRhID0+IHtcbi8vICAgICAgICAgICByZXR1cm4gZGF0YVxuLy8gICAgICAgICB9KVxuLy8gICAgICAgfVxuLy8gICAgIH0pXG4vLyAgIH1cbi8vIFxuLy8gICBmb2xsb3cgKHVybCwgLi4uY2hhbm5lbCkge1xuLy8gICAgIGxldCBib2R5ID0gYGFjdGlvbj1mb2xsb3cmdXJsPSR7dXJsfWBcbi8vICAgICBpZiAoY2hhbm5lbC5sZW5ndGgpIHtcbi8vICAgICAgIGJvZHkgKz0gYCZjaGFubmVsPSR7Y2hhbm5lbFswXX1gXG4vLyAgICAgfVxuLy8gICAgIGZldGNoKHRoaXMuZW5kcG9pbnQsIHtcbi8vICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuLy8gICAgICAgaGVhZGVyczogeyAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSxcbi8vICAgICAgIGJvZHk6IGJvZHlcbi8vICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHtcbi8vICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCB8fCByZXNwb25zZS5zdGF0dXMgPT09IDIwMSkge1xuLy8gICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpLnRoZW4oZGF0YSA9PiB7XG4vLyAgICAgICAgICAgcmV0dXJuIGRhdGFcbi8vICAgICAgICAgfSlcbi8vICAgICAgIH1cbi8vICAgICB9KVxuLy8gICB9XG4vLyBcbi8vICAgc2VhcmNoIChxdWVyeSwgLi4uY2hhbm5lbCkge1xuLy8gICAgIGxldCBib2R5ID0gYGFjdGlvbj1zZWFyY2gmcXVlcnk9JHtxdWVyeX1gXG4vLyAgICAgaWYgKGNoYW5uZWwubGVuZ3RoKSB7XG4vLyAgICAgICBib2R5ICs9IGAmY2hhbm5lbD0ke2NoYW5uZWxbMF19YFxuLy8gICAgIH1cbi8vICAgICByZXR1cm4gZmV0Y2godGhpcy5lbmRwb2ludCwge1xuLy8gICAgICAgbWV0aG9kOiAnUE9TVCcsXG4vLyAgICAgICBoZWFkZXJzOiB7ICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9LFxuLy8gICAgICAgYm9keTogYm9keVxuLy8gICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4ge1xuLy8gICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAxKSB7XG4vLyAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCkudGhlbihkYXRhID0+IHtcbi8vICAgICAgICAgICByZXR1cm4gZGF0YVxuLy8gICAgICAgICB9KVxuLy8gICAgICAgfVxuLy8gICAgIH0pXG4vLyAgIH1cbi8vIH1cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIE1pY3JvcHViQ2xpZW50OiBNaWNyb3B1YkNsaWVudFxuICAgIC8vIE1pY3Jvc3ViQ2xpZW50OiBNaWNyb3N1YkNsaWVudFxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///509\n')}},__webpack_module_cache__={};function __webpack_require__(I){var g=__webpack_module_cache__[I];if(void 0!==g)return g.exports;var C=__webpack_module_cache__[I]={exports:{}};return __webpack_modules__[I](C,C.exports,__webpack_require__),C.exports}var __webpack_exports__=__webpack_require__(509);understory=__webpack_exports__})();